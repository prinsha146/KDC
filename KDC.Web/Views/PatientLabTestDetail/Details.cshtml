@model IEnumerable<KDC.DL.ViewModel.PatientLabTestDetailVM>
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    var detail = ViewBag.Detail;
}

<section class="content-header"></section>

<section class="content">
    <div class="box box-primary">
        <div class="box-body">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group col-sm-4">
                        <span> Date(AD): </span> &nbsp;&nbsp;
                        @*<strong> @(((DateTime)detail.InvoiceDateAD).ToString("yyyy-MM-dd"))</strong>*@
						<strong>@detail.InvoiceDate</strong>
                    </div>

                    <div class="form-group col-sm-4">
                        <span> Date(BS): </span>&nbsp;&nbsp;
                        @*<strong> @detail.InvoiceDateBS</strong>*@
						<strong>@ViewBag.InvoiceDateBS</strong>
                    </div>

                    <div class="form-group col-sm-4">
                        <span> Invoice No: </span>&nbsp;&nbsp;
                        <strong> @detail.InvoiceNo</strong>
                    </div>

                    <div class="form-group col-sm-4">
                        <span> Lab No: </span>&nbsp;&nbsp;
                        <strong> @detail.LabCode</strong>
                    </div>

					<div class="form-group col-sm-4">
						<span> Lab Date: </span>&nbsp;&nbsp;
						@*<strong> @detail.LabDateAD</strong>*@
						<strong> @detail.LabDate</strong>
					</div>

                    <div class="form-group col-sm-4">
                        <span> Patient's Name: </span>&nbsp;&nbsp;
                        <strong> @detail.PatientName</strong>
                    </div>

                    <div class="form-group col-sm-4">
                        <span> Sex: </span>&nbsp;&nbsp;
                        @if (detail.Gender == "F")
                        {
                            <strong> Female</strong>
                        }
                        @if (detail.Gender == "M")
                        {
                            <strong>Male</strong>
                        }


                    </div>

                    <div class="form-group col-sm-4">
                        <span> Age: </span>&nbsp;&nbsp;
                        <strong> @detail.Age</strong>
                    </div>

                    <div class="form-group col-sm-4">
                        <span> Address: </span>&nbsp;&nbsp;
                        <strong> @detail.Address</strong>
                    </div>

                    <div class="form-group col-sm-4">
                        <span> Referrer: </span>&nbsp;&nbsp;
                        <strong> @detail.Referrer</strong>
                    </div>

                </div>
            </div>
            <hr />
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-condensed">
                    <thead>
                        <tr>
                            <th>TEST</th>
                            <th>RESULT</th>
                            <th>REFERENCE RANGE</th>
                        </tr>
                    </thead>

                    <tbody>
					@foreach (var item in ViewBag.GroupList as List<KDC.DL.ViewModel.PatientLabTestDetailVM>)
					{
					<tr>
					<td colspan="2" align="center"><b><u>@item.GroupName</u></b></td><td></td>
					</tr>
						foreach (var serv in (ViewBag.ServiceList as List<KDC.DL.ViewModel.PatientLabTestDetailVM>).Where(g => g.GroupId == item.GroupId).ToList())
						{
						<tr>
							<td colspan="3">@serv.ServiceName</td>
						</tr>
						foreach (var a in Model.Where(s=>s.ServiceId==serv.ServiceId).ToList())
						{
						<tr>
						<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@a.Particular</td>
						<td>@a.Result</td>
						<td>@a.MinValue <span>-</span> @a.MaxValue</td>
						</tr>
							
						}
						}
						
					}
                       

                    </tbody>
                </table>
            </div>

        </div>
    </div>
</section>
