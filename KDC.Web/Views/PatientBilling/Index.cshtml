@model IEnumerable<KDC.DL.ViewModel.PatientBillingVM>
@{
	ViewBag.Title = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";
}


<section class="content-header">
	<h1>Patient List</h1>
	<ol class="breadcrumb">
		@if (Convert.ToString(Session["UserType"]) == "Reception" || Convert.ToString(Session["UserType"]) == "Admin")
		{
		<li class="list"><a href="@Url.Action("Create", "PatientBilling")"><i class="fa fa-plus-circle"></i> Add </a></li>
		<li class="list"><a href="@Url.Action("PatientBillPrint", "PatientBilling", new { id = 19})"><i class="fa fa-list"></i> Patient Bill</a></li>
		<li class="list"><a href="@Url.Action("BillReport", "PatientBilling")"><i class="fa fa-list"></i> All Bill</a></li>
		}

		@*<li class="list"><a href="@Url.Action("#", "PatientLabTestBilling")"><i class="fa fa-arrow-left"></i>Lab Test List</a></li>*@
	</ol>
</section>


<section class="content">
	<div class="box box-primary">
		<div class="box-body">
			<div class="table-responsive">
				<table id="example" class="table table-bordered table-striped table-condensed">
					<thead>
						<tr class="">
							<th>
								Patient Name
							</th>
							<th>Age</th>
							<th>
								Gender
							</th>
							<th>
								Phone
							</th>
							<th>
								Address
							</th>
							<th>Lab Code</th>
							<th>Entered Date</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model)
						{
						<tr>
							<td>@item.PatientName </td>
							<td>@item.Age</td>
							<td>
								@*@if (item.Gender == "M")
									{
										<span>Male</span>
									}
									else if (item.Gender == "F")
									{
										<span>Female</span>
									}
									else
									{
										<span>Other</span>
									}*@
								@item.Gender
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.PhoneMobile)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.Address)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.LabCode)
							</td>
							<td>
								@(((DateTime)item.EnteredDate).ToString("yyyy-MM-dd"))
							</td>

							@*<td class="hidden">
									@item.Barcode
									<div id="printableArea_@item.Barcode">
										<svg id="B_@item.Barcode" style="margin-top:-35px; height:90px"></svg>
										<script>
												JsBarcode("#B_@item.Barcode", "@item.Barcode");
										</script>
									</div>
								</td>*@

							<td>
								@if (Convert.ToString(Session["UserType"]) == "Admin" || Convert.ToString(Session["UserType"]) == "Reception")
								{
								@*@Html.ActionLink(" ", "Edit", new { id = item.PatientId }, new { @class = "fa fa-pencil text-primary", title = "Edit" }) <span>|</span>*@
									<a href="@Url.Action("Edit", "PatientBilling", new { id = item.PatientId})"><span class="btn btn-success btn-xs">Edit</span> |</a>
									@*@Html.ActionLink(" ", "Delete", new { id = item.PatientId }, new { @class = "fa fa-trash text-danger", title = "Delete" }) <span>|</span>*@
									<a href="@Url.Action("Delete", "PatientBilling", new { @id = item.PatientId})" onclick='return confirmDelete();'><span class="fa fa-trash text-danger"></span><span>|</span></a>
									@*@Html.ActionLink(" ", "Index", "PatientLabTestBilling", new { id = item.PatientId }, new { @class = "fa fa-list text-success", title = "Details" })*@
									@Html.ActionLink(" ", "Details", "PatientBilling", new { id = item.PatientId }, new { @class = "fa fa-list text-success", title = "Details" })
								}
								@if (Convert.ToString(Session["UserType"]) == "Lab")
								{
									if (item.IsResultAdded == "Default")
									{
									<a href="@Url.Action("Create", "PatientLabTestDetail", new { id = item.PatientId})"><span class="btn btn-success btn-xs">Add Result</span></a>
									}
									if (item.IsResultAdded == "Added")
									{
									<a href="@Url.Action("Create", "PatientLabTestDetail", new { id = item.PatientId})"><span class="btn btn-success btn-xs">Edit Result</span></a> <span>|</span>
									<a href="@Url.Action("Details", "PatientLabTestDetail", new { id = item.PatientId})"><span class="btn btn-warning btn-xs">Report</span></a>
									}
								}
							</td>
						</tr>

						}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</section>
<script>
	function confirmDelete() {
		return confirm('Are you sure you want to delete this?');
	}
</script>
