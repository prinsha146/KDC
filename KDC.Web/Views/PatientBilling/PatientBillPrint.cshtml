@model IEnumerable<KDC.DL.ViewModel.PatientBillVM>
@{
	ViewBag.Title = "PatientBillPrint";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
	var patient = ViewBag.Patient;
}

@*<div class="container">
	@using (Html.BeginForm())
	{
	@Html.AntiForgeryToken()
		{
		<div class="col-sm-3">
			<div class="form-group">
				<label>Lab No.</label>
				<input type="text" class="form-control" name="LabCode" id="LabCode" />
			</div>
		</div>

					<div class="col-sm-3">
						<div class="form-group">
							<label>Invoice</label>
							<input type="text" class="form-control" name="Invoice" id="Invoice" />
						</div>
					</div>

					<div class="col-sm-2">
						<div class="form-group">
							<label><span style="color:#fff">print</span></label>
							<input type="submit" class="form-control btn btn-primary" name="" value="Search" id="Search" />
						</div>
					</div>
		}
	}
	<div class="col-sm-2">
		<div class="form-group">
			<label><span style="color:#fff">print</span></label>
			<a class="btn btn-success form-control" href="javascript:void(0);" onclick="printPageArea('printableArea')">Print</a>
		</div>
	</div>
	
	<div class="col-sm-2">
			<a href="@Url.Action("Index", "PatientBilling")"><i class="fa fa-arrow-left"></i> List </a>
	</div>

</div>*@

<script>
function printPageArea(areaID){
    var printContent = document.getElementById(areaID);
    var WinPrint = window.open('', '', 'width=900,height=650');
    WinPrint.document.write(printContent.innerHTML);
    WinPrint.document.close();
    WinPrint.focus();
    WinPrint.print();
    WinPrint.close();
}
</script>

<div class="container">
	@using (Html.BeginForm())
	{
	@Html.AntiForgeryToken()
		{
		<div class="col-sm-3">
			<div class="form-group">
				<label>Lab No.</label>
				<input type="text" class="form-control" name="LabCode" id="LabCode" />
			</div>
		</div>

		<div class="col-sm-3">
			<div class="form-group">
				<label>Invoice</label>
				<input type="text" class="form-control" name="Invoice" id="Invoice" />
			</div>
		</div>

					<div class="col-sm-2">
						<div class="form-group">
							<label><span style="color:#eee">print</span></label>
							<input type="submit" class="form-control btn btn-primary" name="" value="Search" id="Search" />
						</div>
					</div>
		}
	}
	<div class="col-sm-2">
		<div class="form-group">
			<label><span style="color:#eee">print</span></label>
			<a class="btn btn-success form-control" href="javascript:void(0);" onclick="printPageArea('printableArea')">Print</a>
		</div>
	</div>

	<div class="col-sm-2">
		<a href="@Url.Action("Index", "PatientBilling")"><i class="fa fa-arrow-left"></i> List </a>
	</div>

</div>


<section class="content">
	<div class="box box-primary">
		<div class="box-body">
			<div class="col-md-12 container">
				<div class="panel panel-default">
					<div class="panel-body">
						<div id="printableArea">
							<Div style="font-size: 12px; font-family: sans-serif; width: 210mm; height: 297mm;">
								<div style="margin-top: 120px;position: absolute;width: 191mm;margin-left: 35px;">
									<div style="border-radius: 20px;border: 1px solid black;padding: 5px 10px;border-right: 10px black solid;border-bottom: 10px solid black;">
										@Html.ValidationSummary(true, "", new { @class = "text-danger" })
										<table style="width:100%;font-size: 12px; ">
											<tr>
												<td style="width:33.33%;padding:1px"><span>Date(BS) : </span><strong>@patient.InvoiceDateBS</strong></td>
												<td style="width:33.33%;padding:1px"><center><strong>INVOICE</strong></center></td>
												<td style="width:33.33%;text-align:right;padding:1px"><span>Date(AD) : </span><strong>@(((DateTime)patient.InvoiceDateAD).ToString("yyyy/MM/dd"))</strong></td>

											</tr>
										</table>
										<table style="width:100%;font-size:12px; ">

											<tr>
												<td style="width:105px;padding:1px"><span>Invoice No.</span></td>
												<td style="width:20px;padding:1px">:</td>
												<td style="padding:1px"><strong>@patient.InvoiceNo</strong></td>

											</tr>
											<tr>
												<td style="padding:1px"><span>Manual No.</span></td>
												<td>:</td>
												<td><strong>@patient.ManualNo</strong></td>
												<td style="padding:1px"><span>Age:</span></td>
												<td>:</td>
												<td style="padding:1px"><strong>@patient.Age</strong></td>
											</tr>
											<tr>
												<td style="padding:1px"><span>Patient's Name:</span></td>
												<td>:</td>
												<td> <strong>@patient.PatientName</strong></td>
												<td style="padding:1px"><span>Gender:</span></td>
												<td style="padding:1px">:</td>
												<td><strong>@patient.Gender</strong></td>

											</tr>
											<tr>
												<td style=""><span>Address:</span>&nbsp;&nbsp; </td>
												<td style="">:</td>
												<td style=""><strong>@patient.Address</strong></td>

											</tr>
											<tr>
												<td style="padding:1px"><span>Referrer:</span></td>
												<!-- 									<td style=""><span>Lab Code:</span>&nbsp;&nbsp; <strong>@patient.LabCode</strong></td> -->
												<td style="padding:1px">:</td>
												<td style="padding:1px"><strong>@patient.Referrer</strong></td>
											</tr>

										</table>
									</div>
									<table width="100%" style="margin-top:5px;font-size: 12px; ">
										<tr style="border:1px solid #000;background:#eee;border-radius: 26px !important;">
											<th style="padding:1px">Sn.</th>
											<th style="padding:1px">Description</th>
											<th style="padding:1px">Unit</th>
											<th style="padding:1px">Unit Rs.</th>
											<th style="padding:1px">Amount</th>
											<th style="padding:1px">Remarks</th>
										</tr>
										@{ int i = 1; }
										@foreach (var item in Model)
										{
										<tr>
											<td style="padding:1px">@i</td>
											<td style="padding:1px">@item.Service</td>
											<td style="padding:1px">@item.Unit</td>
											<td style="padding:1px">@item.UnitPrice</td>
											<td style="padding:1px">@item.Amount</td>
											<td style="padding:1px"></td>
										</tr>
											i++;
										}
									</table>

									<table style="width:40%; float:right;border:2px solid #000; margin-top:5px;font-size: 12px; ">
										<tr>
											<td style="padding:1px">Amount</td>
											<td>:</td>
											<td style="padding:1px"> @patient.TotalAmount</td>
										</tr>
										<tr>
											<td style="padding:1px">Net</td>
											<td>:</td>
											<td style="padding:1px"> @patient.Net</td>
										</tr>
										<tr>
											<td style="padding:1px">Tender</td>
											<td>:</td>
											<td style="padding:1px"> @patient.Tender</td>
										</tr>
										<tr>
											<td style="padding:1px">Change</td>
											<td>:</td>
											<td style="padding:1px"> @patient.Change</td>
										</tr>
									</table>
									<div style="clear:both"></div>
									<p style="margin:0px 0px 5px;font-size: 12px; ">Teller&nbsp;: &nbsp;@patient.EnteredBy</p>

									<p style="font-size: 12px; background:#eee;padding: 5px;border: 1px solid black;border-radius: 20px;">In Words: &nbsp;Rs.&nbsp;</span> <input type="text" id="Words" name="Words" style="background:#eee;border:0px;text-align:center; width: 400px;" readonly><p>

								</div>
							</Div>
						</div>
					</div>
				</div>
			</div>
			<div class="clearfix"></div>



		</div>
	</div>
</section>


<script>

		var a = @patient.Net;
		//alert(a);
		var th = ['', 'Thousand', 'Million', 'Billion'];
		var dg = ['Zero', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
		var tn = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
		var tw = ['Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];

		window.onload = toWords(a);
		function toWords(s) {
			s = s.toString();

			s = s.replace(/[\, ]/g, '');
			if (s != parseFloat(s))
				return 'not a number';
			var x = s.indexOf('.');
			if (x == -1) x = s.length;
			if (x > 15) return 'too big';
			var n = s.split(''); var str = '';
			var sk = 0;
			for (var i = 0; i < x; i++) {
				if ((x - i) % 3 == 2) {
					if (n[i] == '1') {
						str += tn[Number(n[i + 1])] + ' ';
						i++;
						sk = 1;
					} else
						if (n[i] != 0) {
							str += tw[n[i] - 2] + ' ';
							sk = 1;
						}
				}
				else if (n[i] != 0) {
					str += dg[n[i]] + ' ';
					if ((x - i) % 3 == 0)
						str += 'Hundred ';
					sk = 1;
				}
				if ((x - i) % 3 == 1) {
					if (sk) str += th[(x - i - 1) / 3] + ' ';
					sk = 0;
				}
			}
			if (x != s.length) {
				var y = s.length;
				str += 'point ';
				for (var i = x + 1; i < y; i++)
					str += dg[n[i]] + ' ';
			}
			//alert(str.replace(/\s+/g, ' '));
			//return str.replace(/\s+/g, ' ');
			document.getElementById('Words').value = str.replace(/\s+/g, ' ') + 'Only';
		}
</script>






	

